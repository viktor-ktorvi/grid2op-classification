[mypy]
# ============================================================================
# Type Checking Strictness
# ============================================================================

# Specifies the Python version to use for type checking
# This affects which features and typing constructs are available
python_version = 3.14

# Warns if a function returns Any type, helping catch overly permissive returns
# Example: def foo() -> Any: ... will trigger a warning
warn_return_any = true

# Warns about unused mypy configuration options in this file
# Helps keep your config clean and up-to-date
warn_unused_configs = true

# Requires type annotations on all function definitions
# Functions without annotations will be flagged as errors
# Example: def foo(x, y): ... is an error, needs def foo(x: int, y: str) -> bool: ...
disallow_untyped_defs = true

# Disallows using types from unimported modules (usually keep this false)
# When true, prevents accidental usage of types without proper imports
disallow_any_unimported = false

# Disallows implicit Optional types
# With this enabled, you must explicitly write Optional[int] instead of just int for nullable params
# Example: def foo(x: int = None) is an error, should be def foo(x: Optional[int] = None)
no_implicit_optional = false

# Warns about unnecessary casts
# Example: cast(int, 5) is redundant since 5 is already an int
warn_redundant_casts = true

# Warns about unused '# type: ignore' comments
# Helps clean up suppressions that are no longer needed
warn_unused_ignores = true

# Warns if a function is missing a return statement when it should return a value
# Catches functions that might not return in all code paths
warn_no_return = true

# Warns about code that can never be executed
# Example: code after a 'return' or 'raise' statement
warn_unreachable = true

# Enables strict equality checks
# Prevents comparisons between incompatible types like if "string" == 5: ...
strict_equality = true

# Enables strict Optional handling
# Makes None checking more rigorous and prevents unsafe Optional usage
strict_optional = true

# ============================================================================
# Import Discovery
# ============================================================================

# Specifies additional directories to search for modules
# Useful if your code is in a 'src' directory instead of the project root
mypy_path = "src"

# Allows mypy to work with namespace packages (packages without __init__.py)
# Important for modern Python project structures
namespace_packages = true

# Uses the mypy_path setting as the base for relative imports
# Helps mypy correctly resolve module paths
explicit_package_bases = true

# ============================================================================
# Error Reporting
# ============================================================================

# Shows additional context around error messages
# Makes error messages more informative by showing surrounding code
show_error_context = true

# Shows column numbers in error messages, not just line numbers
# Example: file.py:10:5: error instead of just file.py:10: error
show_column_numbers = true

# Shows error codes in error messages (like [arg-type] or [return-value])
# Makes it easier to selectively ignore specific error types
show_error_codes = true

# Uses prettier, more readable formatting for error messages
# Colors and formats output for better readability
pretty = true

# ============================================================================
# Incremental Mode
# ============================================================================

# Enables incremental type checking for faster subsequent runs
# Mypy caches results and only rechecks changed files
incremental = true

# Specifies where to store the incremental cache
# Can be changed or set to a system temp directory
cache_dir = ".mypy_cache"

# ============================================================================
# Untyped Definitions and Calls
# ============================================================================

# Type-checks the interior of functions without type annotations
# Even if a function lacks annotations, mypy will still check its body
check_untyped_defs = true

# Controls whether calling untyped functions is allowed (false = more lenient)
# When true, you can't call functions that lack type annotations
disallow_untyped_calls = true

# Disallows functions with incomplete type annotations
# Example: def foo(x: int) -> None: ... is OK, but def foo(x) -> None: ... is an error
disallow_incomplete_defs = true

# Controls whether decorators need type annotations (false = more lenient)
# When true, all decorators must be properly typed
disallow_untyped_decorators = true

# ============================================================================
# None and Optional Handling
# ============================================================================

# Requires explicit re-exports in __init__.py files
# Prevents accidental exposure of imported names
# Must use __all__ or explicit imports to re-export
no_implicit_reexport = true

# ============================================================================
# Miscellaneous
# ============================================================================

# Controls default behavior for missing type stubs
# When false, missing stubs are errors; when true, they're silently ignored
# Set to false to explicitly handle missing imports in overrides
ignore_missing_imports = true

# ============================================================================
# Per-Module Options
# ============================================================================

# Override settings for test files - tests often need less strict typing
[[tool.mypy.overrides]]
disallow_untyped_defs = false  # Allow tests without type annotations

# Ignore missing type stubs for third-party libraries
# Add libraries here that don't have type stubs available
module = ["tests.*"  # Applies to all modules under 'tests' directory
          "numpy.*",    # All numpy submodules
          "pandas.*",   # All pandas submodules]
ignore_missing_imports = true  # Don't error on missing stubs for these libraries